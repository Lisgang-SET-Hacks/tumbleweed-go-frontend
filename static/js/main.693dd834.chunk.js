(this["webpackJsonptumbleweed-go-frontend"]=this["webpackJsonptumbleweed-go-frontend"]||[]).push([[0],{119:function(e,t,a){e.exports=a(149)},124:function(e,t,a){},144:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a.n(n),r=a(63),i=a.n(r),s=(a(124),a(64)),l=a(65),c=a(79),u=a(78),d=a(165),p=a(95),m=a.n(p),f=a(164),w=a(172),y=a(166),b=a(101),g=a(6),h=a(96),v=a(171),L=a(167),k=a(170),R=a(169),_=a(168),S=a(83),T=a(85),j=a(82),E=a(61),O=(a(142),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getData=function(e){m.a.get("https://tumbleweed-go-284013.ue.r.appspot.com/tumbleweed/get").then((function(t){t.status&&200===t.status?e(t.data.result):console.log("rip "+t.status)})).catch((function(e){console.log("big rip "+e)}))},n.setAllTumbleweedLayers=function(e){for(var t=[],a=0;a<n.props.sliderRange;a++)t.push(n.setSingleTumbleweedLayer(e,a-1));n.setState({tumbleweedLayers:t,currentTumbleweedLayer:t[0]})},n.setSingleTumbleweedLayer=function(e,t){var a=new S.b({image:new T.a({radius:7,fill:new j.a({color:"#e3af2b"}),stroke:new E.a({color:"#664e13",width:2})})}),n=new S.b({image:new T.a({radius:7,fill:new j.a({color:"#e2cf9e"}),stroke:new E.a({color:"#664e13",width:2})})}),o=new S.b({stroke:new E.a({color:"#664e13",width:4})}),r=e.map((function(e,o){var r,i,s=a;-1===t?(i=e.location._lat,r=e.location._long):0===e.predictedLocations.length?(i=e.location._lat,r=e.location._long,s=n):t<e.predictedLocations.length?(i=e.predictedLocations[t]._lat,r=e.predictedLocations[t]._long):(i=e.predictedLocations[e.predictedLocations.length-1]._lat,r=e.predictedLocations[e.predictedLocations.length-1]._long,s=n);var l=new f.a({geometry:new h.a(Object(g.d)([r,i]))});return l.setStyle(s),l}));if(-1!==t)for(var i=function(t){e.forEach((function(e){if(t<e.predictedLocations.length){var a=0===t?e.location._lat:e.predictedLocations[t-1]._lat,n=0===t?e.location._long:e.predictedLocations[t-1]._long,i=e.predictedLocations[t]._lat,s=e.predictedLocations[t]._long,l=new f.a({geometry:new v.a([Object(g.d)([n,a]),Object(g.d)([s,i])])});l.setStyle(o),r.push(l)}}))},s=0;s<=t;s++)i(s);return new L.a({source:new R.a({features:r})})},n.initMap=function(){var e=new k.a({className:"map__bingMaps",source:new _.a({key:"AtMr0RAC0iKdKPPPsGSPqIFCxjk7XpR9rq99IQR5vDBoax8u1KuYvOinwtsiQcFI",imagerySet:"AerialWithLabelsOnDemand"})}),t=new w.a({element:n.popupRef.current,positioning:"bottom-center",stopEvent:!0,offset:[0,-16]});n.map=new y.a({layers:[e,n.state.currentTumbleweedLayer],overlays:[t],target:n.mapRef.current,view:new b.a({center:Object(g.d)([-97,42]),zoom:5,minZoom:5,maxZoom:15})}),n.map.on("click",(function(e){var a=n.map.getFeaturesAtPixel(e.pixel)[0];a?n.showPopup(a,t):n.hidePopup()}))},n.showPopup=function(e,t){var a=e.getGeometry().getCoordinates(),o=Object(g.n)(a,"EPSG:3857","EPSG:4326");n.popupRef.current.innerHTML="".concat(o[1].toFixed(2),", ").concat(o[0].toFixed(2)),n.popupRef.current.style.display="block",t.setPosition(a)},n.hidePopup=function(){n.popupRef.current.style.display="none"},n.showTumbleweedLayer=function(e){n.map.removeLayer(n.state.currentTumbleweedLayer),n.map.addLayer(n.state.tumbleweedLayers[e]),n.setState({currentTumbleweedLayer:n.state.tumbleweedLayers[e]})},n.state={tumbleweedLayers:[],currentTumbleweedLayer:null},n.map=null,n.mapRef=o.a.createRef(),n.popupRef=o.a.createRef(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getData((function(t){e.setAllTumbleweedLayers(t),e.initMap()}))}},{key:"componentDidUpdate",value:function(e,t){e.day!==this.props.day&&this.showTumbleweedLayer(this.props.day)}},{key:"render",value:function(){return o.a.createElement("div",{ref:this.mapRef,className:"map"},o.a.createElement("div",{ref:this.popupRef,className:"map__popup",style:{display:"none"}},"Test"))}}]),a}(o.a.Component)),M=function(e){return e.toDateString().split(" ").slice(0,3).join(" ")},P=(a(144),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={day:0,sliderMarks:[],sliderRange:8},e.setSliderMarks=function(){for(var t=[{value:0,label:o.a.createElement("b",null,"Today")},{value:1,label:"Tomorrow"}],a=2;a<e.state.sliderRange;a++){var n=new Date(Date.now()+864e5*a);t.push({value:a,label:M(n)})}e.setState({sliderMarks:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setSliderMarks()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container"},o.a.createElement(O,{day:this.state.day,sliderRange:this.state.sliderRange}),o.a.createElement("div",{className:"controls"},o.a.createElement("h3",{style:{marginTop:0}},"View movement predictions (USA only):"),o.a.createElement(d.a,{id:"slider",className:"controls__slider",onChange:function(t,a){return e.setState({day:a})},min:0,max:this.state.sliderRange-1,marks:this.state.sliderMarks})))}}]),a}(o.a.Component));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(P,null)),document.getElementById("root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.693dd834.chunk.js.map