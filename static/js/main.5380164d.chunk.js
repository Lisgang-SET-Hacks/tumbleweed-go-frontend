(this["webpackJsonptumbleweed-go-frontend"]=this["webpackJsonptumbleweed-go-frontend"]||[]).push([[0],{132:function(e,t,a){e.exports=a(162)},137:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(75),l=a.n(o),i=(a(137),a(61)),c=a(62),s=a(66),u=a(64),p=a(179),d=a(183),m=a(106),f=a.n(m),g=a(176),w=a(187),h=a(180),b=a(112),y=a(6),v=a(107),L=a(186),E=a(181),_=a(185),k=a(184),R=a(182),O=a(94),S=a(96),j=a(93),T=a(74),M=(a(155),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getData=function(e){f.a.get("https://tumbleweed-go-284013.ue.r.appspot.com/tumbleweed/get").then((function(t){t.status&&200===t.status?e(t.data.result):console.log("rip "+t.status)})).catch((function(e){console.log("big rip "+e)}))},n.setAllTumbleweedLayers=function(e){for(var t=[],a=0;a<n.props.sliderRange;a++)t.push(n.setSingleTumbleweedLayer(e,a-1));n.setState({tumbleweedLayers:t,currentTumbleweedLayer:t[0]})},n.setSingleTumbleweedLayer=function(e,t){var a=new O.b({image:new S.a({radius:7,fill:new j.a({color:"#e3af2b"}),stroke:new T.a({color:"#664e13",width:2})})}),n=new O.b({image:new S.a({radius:7,fill:new j.a({color:"#e2cf9e"}),stroke:new T.a({color:"#664e13",width:2})})}),r=new O.b({stroke:new T.a({color:"#664e13",width:4})}),o=e.map((function(e,r){var o,l,i=a;-1===t?(l=e.location._lat,o=e.location._long):0===e.predictedLocations.length?(l=e.location._lat,o=e.location._long,i=n):t<e.predictedLocations.length?(l=e.predictedLocations[t]._lat,o=e.predictedLocations[t]._long):(l=e.predictedLocations[e.predictedLocations.length-1]._lat,o=e.predictedLocations[e.predictedLocations.length-1]._long,i=n);var c=new g.a({geometry:new v.a(Object(y.d)([o,l]))});return c.setStyle(i),c}));if(-1!==t)for(var l=function(t){e.forEach((function(e){if(t<e.predictedLocations.length){var a=0===t?e.location._lat:e.predictedLocations[t-1]._lat,n=0===t?e.location._long:e.predictedLocations[t-1]._long,l=e.predictedLocations[t]._lat,i=e.predictedLocations[t]._long,c=new g.a({geometry:new L.a([Object(y.d)([n,a]),Object(y.d)([i,l])])});c.setStyle(r),o.push(c)}}))},i=0;i<=t;i++)l(i);return new E.a({source:new k.a({features:o})})},n.initMap=function(){var e=new _.a({className:"map__bingMaps",source:new R.a({key:"AtMr0RAC0iKdKPPPsGSPqIFCxjk7XpR9rq99IQR5vDBoax8u1KuYvOinwtsiQcFI",imagerySet:"AerialWithLabelsOnDemand"})}),t=new w.a({element:n.popupRef.current,positioning:"bottom-center",stopEvent:!1,offset:[0,-16]});n.map=new h.a({layers:[e,n.state.currentTumbleweedLayer],overlays:[t],target:n.mapRef.current,view:new b.a({center:Object(y.d)([-97,42]),zoom:5,minZoom:5,maxZoom:15})}),n.map.on("click",(function(e){var a=n.map.getFeaturesAtPixel(e.pixel)[0];a?n.showPopup(a,t):n.hidePopup()}))},n.showPopup=function(e,t){var a=e.getGeometry().getCoordinates(),r=Object(y.n)(a,"EPSG:3857","EPSG:4326");n.popupRef.current.innerHTML="".concat(r[1].toFixed(5),", ").concat(r[0].toFixed(5)),n.popupRef.current.style.display="block",t.setPosition(a)},n.hidePopup=function(){n.popupRef.current.style.display="none"},n.showTumbleweedLayer=function(e){n.map.removeLayer(n.state.currentTumbleweedLayer),n.map.addLayer(n.state.tumbleweedLayers[e]),n.setState({currentTumbleweedLayer:n.state.tumbleweedLayers[e]})},n.state={tumbleweedLayers:[],currentTumbleweedLayer:null},n.map=null,n.mapRef=r.a.createRef(),n.popupRef=r.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getData((function(t){e.setAllTumbleweedLayers(t),e.initMap()}))}},{key:"componentDidUpdate",value:function(e,t){e.day!==this.props.day&&this.showTumbleweedLayer(this.props.day)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.mapRef,className:"map"},r.a.createElement("div",{ref:this.popupRef,className:"map__popup",style:{display:"none"}}))}}]),a}(r.a.Component)),D=a(177),P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Tumbleweed Info"),r.a.createElement(D.a,null),r.a.createElement("h4",null,"Current position (est.)"),r.a.createElement("p",null,"(46, -110)"),r.a.createElement(D.a,null),r.a.createElement("h4",null,"Initial sighting time"),r.a.createElement("p",null,(new Date).toLocaleDateString(),r.a.createElement("br",null),(new Date).toLocaleTimeString()),r.a.createElement("h4",null,"Initial sighting position"),r.a.createElement("p",null,"(46, -110)"),r.a.createElement("h4",null,"Initial sighting image"),r.a.createElement("div",{className:"aspect-ratio",style:{paddingBottom:"75%"}},r.a.createElement("div",null,r.a.createElement("img",{src:"https://picsum.photos/400",alt:"Initial sighting"}))))}}]),a}(r.a.Component),x=function(e){var t=e.toDateString().split(" ");return t[0]+" "+t[2]},I=(a(161),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={day:0,sliderMarks:[],sliderRange:8},e.setSliderMarks=function(){for(var t=[{value:0,label:r.a.createElement("b",null,"Today")},{value:1,label:"Tomorrow"}],a=2;a<e.state.sliderRange;a++){var n=new Date(Date.now()+864e5*a);t.push({value:a,label:x(n)})}e.setState({sliderMarks:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setSliderMarks()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"map__wrapper"},r.a.createElement(M,{day:this.state.day,sliderRange:this.state.sliderRange})),r.a.createElement(p.a,{className:"info"},r.a.createElement(P,null)),r.a.createElement("div",{className:"timeline"},r.a.createElement("h4",{style:{marginTop:0}},"Movement predictions (USA only)"),r.a.createElement(d.a,{className:"timeline__slider",onChange:function(t,a){return e.setState({day:a})},min:0,max:this.state.sliderRange-1,marks:this.state.sliderMarks})))}}]),a}(r.a.Component));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.5380164d.chunk.js.map